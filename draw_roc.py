import numpy as np
import matplotlib.pyplot as plt
from sklearn.metrics import roc_curve, auc


def plot_roc_curves(models):
    """
    绘制多个模型的ROC曲线。
    :param models: 一个列表，每个元素是一个字典，包含 'name', 'labels', 'probabilities'。
    """
    plt.figure(figsize=(8, 6))

    for model in models:
        name = model['name']
        labels = np.array(model['labels'])
        probabilities = np.array(model['probabilities'])

        fpr, tpr, _ = roc_curve(labels, probabilities)
        roc_auc = auc(fpr, tpr)

        plt.plot(fpr, tpr, label=f'{name} (AUC = {roc_auc:.2f})')

    plt.plot([0, 1], [0, 1], linestyle='--', color='gray', alpha=0.7)
    plt.xlim([0.0, 1.0])
    plt.ylim([0.0, 1.05])
    plt.xlabel('False Positive Rate')
    plt.ylabel('True Positive Rate')
    plt.title('ROC Curves for Different Models')
    plt.legend(loc='lower right')
    # plt.show()
    plt.savefig('roc_curves.png')


# 示例数据
labels = [0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0]
probability1 = [0.28778908, 0.41385138, 0.24387605, 0.7255483, 0.27517805, 0.44091555, 0.2444044, 0.2637705, 0.6838806, 0.29971987, 0.6765937, 0.24244244, 0.269561, 0.2419354, 0.24737488, 0.26873875, 0.29316005, 0.70684004, 0.65362227, 0.4140826, 0.31632134, 0.50937307, 0.70790625, 0.24438909, 0.61764234, 0.35901287, 0.63809156, 0.70401454, 0.65828335, 0.27093032, 0.3171804, 0.30158448, 0.70632756, 0.37170613, 0.2690823, 0.65783954, 0.72110105, 0.7215508, 0.7154521, 0.60228086, 0.49513173, 0.28573903, 0.23913239, 0.25077635, 0.52386975, 0.6226068, 0.26758218, 0.26487905, 0.33577502, 0.7032745, 0.7183987, 0.24279283, 0.4313019, 0.5354908, 0.5435688, 0.33364266, 0.3954489, 0.29396188, 0.27250335, 0.29973418, 0.22592382, 0.29384312, 0.25086957, 0.35618484, 0.24184394, 0.50984406]
probability2 = [0.5232096, 0.5063856, 0.48847058, 0.52145565, 0.5351024, 0.5690968, 0.52674365, 0.57929593, 0.54101926, 0.5702821, 0.5433922, 0.5125035, 0.5366903, 0.51058567, 0.43797788, 0.5605311, 0.51496434, 0.5230155, 0.481421, 0.51183146, 0.4950372, 0.51488966, 0.49162763, 0.536076, 0.43755293, 0.52022445, 0.4918538, 0.5497117, 0.5652579, 0.57492393, 0.4722362, 0.51943505, 0.49411112, 0.5106303, 0.5233592, 0.54176944, 0.55328465, 0.525042, 0.55461985, 0.5547639, 0.5179687, 0.58191496, 0.56977016, 0.55663174, 0.5488886, 0.48976916, 0.4946856, 0.54184896, 0.53240013, 0.5830239, 0.56992906, 0.5013701, 0.550006, 0.5113917, 0.48367393, 0.51550704, 0.50804263, 0.5370736, 0.48816156, 0.5272541, 0.5820659, 0.5294223, 0.54706323, 0.5334511, 0.54446435, 0.5072795]
probability3 = [0.117025964, 0.11824052, 0.12309313, 0.1781105, 0.38403025, 0.47936365, 0.11499919, 0.6151215, 0.43956244, 0.113307655, 0.14421248, 0.10957521, 0.13663839, 0.36949557, 0.16560833, 0.11645106, 0.113223396, 0.11631579, 0.3206469, 0.3186099, 0.11315571, 0.18011768, 0.3068912, 0.11605779, 0.09155511, 0.11655744, 0.108195126, 0.12100522, 0.1289803, 0.3258216, 0.13501851, 0.3676938, 0.20657809, 0.11425792, 0.21006197, 0.18972541, 0.42732888, 0.42195615, 0.62024593, 0.12137163, 0.5861357, 0.6135396, 0.119825624, 0.34394005, 0.11818041, 0.10904761, 0.11093447, 0.11479893, 0.115965635, 0.6116692, 0.62064993, 0.22993615, 0.4109828, 0.11261648, 0.30214807, 0.11568556, 0.36200982, 0.114215486, 0.12151219, 0.11554857, 0.119281545, 0.116294526, 0.30300134, 0.1274343, 0.11675229, 0.20296398]
probability4 = [0.0020320301, 0.0024374793, 0.0020708267, 0.9975321, 0.0021283966, 0.0021451702, 0.0018231076, 0.0036177714, 0.0066282344, 0.018431827, 0.0019149885, 0.013079226, 0.0024195046, 0.0018009003, 0.002104379, 0.017959414, 0.0030735193, 0.002822014, 0.99756145, 0.0021114815, 0.021610664, 0.002049491, 0.0036857352, 0.0019016151, 0.60876536, 0.002079448, 0.0022361064, 0.99685884, 0.8689755, 0.0017817781, 0.93499297, 0.9895766, 0.096446685, 0.0024497677, 0.0028192701, 0.9947319, 0.0035127199, 0.06655615, 0.98536706, 0.9980719, 0.0026582694, 0.0022361767, 0.0023984564, 0.0024714165, 0.99216145, 0.9647218, 0.0017580688, 0.0017626884, 0.0018768965, 0.016981272, 0.99454886, 0.0021712491, 0.0021910497, 0.00243632, 0.003746611, 0.002154853, 0.005961187, 0.0020197048, 0.0018420042, 0.0020363426, 0.002069109, 0.02436106, 0.0020202652, 0.72694796, 0.002413262, 0.91519034]
probability5 = [-1, 0, -4, -2, -1, 0, -4, 0, -4, -2, -1, -5, -1, 1, 0, -6, 0, -1, 0, 0, -6, -3, -1, -4, -2, -2, -1, 0, -5, -2, -3, -3, 0, -3, -4, -1, -4, -1, 3, -1, 2, 1, -7, -4, -2, -5, -1, -2, -3, 1, 1, -3, -1, 0, -3, -2, 0, -2, -2, -3, -3, -2, -1, -2, 1, -1]

models = [
    {'name': 'IHF', 'labels': labels, 'probabilities': probability2},
    {'name': 'IHFWithoutHMCAM', 'labels': labels, 'probabilities': probability1},
    {'name': 'IMF', 'labels': labels, 'probabilities': probability3},
    {'name': 'HFsurv', 'labels': labels, 'probabilities': probability4},
    {'name': 'Diamond', 'labels': labels, 'probabilities': probability5},
]

plot_roc_curves(models)
